# 手工烤面筋小程序 - 项目目录说明文档

## 1. 项目概述

本项目是一个基于微信小程序的手工烤面筋点餐系统，采用微信小程序原生框架开发，使用 TDesign 组件库构建 UI 界面。

### 技术栈
- **框架**：微信小程序原生框架
- **UI 组件库**：TDesign Miniprogram
- **开发语言**：TypeScript / JavaScript
- **样式**：WXSS (微信小程序样式)

---

## 2. 项目目录结构

```
miniprogram-5/
├── miniprogram/              # 小程序源码目录
│   ├── app.json              # 小程序全局配置
│   ├── app.ts                # 小程序入口文件（TypeScript）
│   ├── app.wxss              # 小程序全局样式
│   ├── assets/               # 静态资源目录
│   ├── miniprogram_npm/      # npm 构建产物目录
│   ├── pages/                # 页面目录
│   ├── utils/                # 工具函数目录
│   └── typings/              # TypeScript 类型定义
├── ref/                      # 参考原型文件
├── docs/                     # 文档目录
├── node_modules/             # 依赖包目录
├── package.json              # 项目依赖配置
├── project.config.json       # 微信开发者工具配置
├── project.private.config.json # 私有配置
└── tsconfig.json             # TypeScript 配置
```

---

## 3. 详细目录说明

### 3.1 miniprogram/ - 小程序源码目录

#### 3.1.1 app.json
**文件说明**：小程序全局配置文件

**主要配置**：
- `pages`：页面路径列表，第一个为首页
- `window`：全局窗口配置（导航栏、背景色等）
- `tabBar`：底部导航栏配置（图标、文字、颜色等）
- `usingComponents`：全局组件注册（TDesign 组件）

**关键配置项**：
```json
{
  "pages": [
    "pages/home/home",           // 首页
    "pages/product-list/product-list",  // 商品列表
    "pages/product-detail/product-detail", // 商品详情
    "pages/cart/cart",            // 购物车
    "pages/order/order",          // 订单中心
    "pages/profile/profile",      // 个人中心
    "pages/merchant/merchant"     // 商家管理
  ],
  "tabBar": {
    "list": [
      // 底部导航配置
    ]
  }
}
```

#### 3.1.2 app.ts
**文件说明**：小程序入口文件，定义全局 App 实例

**主要功能**：
- 小程序生命周期管理
- 全局数据定义
- 全局方法定义
- 登录逻辑

**代码结构**：
```typescript
App<IAppOption>({
  globalData: {},  // 全局数据
  onLaunch() {},   // 小程序启动
  onShow() {},     // 小程序显示
  onHide() {}      // 小程序隐藏
})
```

#### 3.1.3 app.wxss
**文件说明**：小程序全局样式文件

**主要样式**：
- 全局字体设置
- 全局背景色
- 通用样式类

---

### 3.2 assets/ - 静态资源目录

#### 3.2.1 assets/icons/
**目录说明**：存放底部导航栏图标

**文件列表**：
- `home.png` / `home-active.png` - 首页图标（未选中/选中）
- `category.png` / `category-active.png` - 分类图标
- `cart.png` / `cart-active.png` - 购物车图标
- `order.png` / `order-active.png` - 订单图标
- `profile.png` / `profile-active.png` - 我的图标
- `README.md` - 图标使用说明

**图标要求**：
- 尺寸：81px × 81px
- 格式：PNG
- 背景：透明

---

### 3.3 pages/ - 页面目录

每个页面目录包含以下文件：
- `*.js` - 页面逻辑文件（JavaScript）
- `*.ts` - 页面逻辑文件（TypeScript 源码）
- `*.json` - 页面配置文件
- `*.wxml` - 页面结构文件
- `*.wxss` - 页面样式文件

#### 3.3.1 pages/home/ - 首页
**功能说明**：小程序首页，展示门店信息、推荐商品、热销商品

**主要功能**：
- 门店信息展示（名称、地址、营业时间、配送范围）
- 今日推荐商品展示
- 热销商品网格展示
- 优惠活动入口
- 购物车数量显示
- 商品加入购物车

**关键文件**：
- `home.wxml` - 页面结构，包含导航栏、门店横幅、推荐卡片、商品网格
- `home.ts` - 页面逻辑，包含数据定义、购物车操作、页面跳转
- `home.wxss` - 页面样式，包含所有 UI 样式定义

#### 3.3.2 pages/product-list/ - 商品列表页
**功能说明**：商品分类列表页面

**主要功能**：
- 分类标签切换
- 商品列表展示（图片、名称、价格、库存状态）
- 商品搜索（预留）
- 加入购物车
- 跳转商品详情

**关键文件**：
- `product-list.wxml` - 包含分类标签栏、商品列表
- `product-list.ts` - 包含分类切换、商品数据、购物车操作
- `product-list.wxss` - 商品列表样式

#### 3.3.3 pages/product-detail/ - 商品详情页
**功能说明**：商品详细信息页面

**主要功能**：
- 商品图片轮播
- 商品信息展示（名称、描述、价格）
- 口味选择（Radio）
- 辣度选择（Radio）
- 加料选择（Checkbox）
- 数量选择（Stepper）
- 加入购物车
- 立即购买

**关键文件**：
- `product-detail.wxml` - 包含图片轮播、商品信息、选项选择、操作按钮
- `product-detail.ts` - 包含选项状态管理、购物车操作
- `product-detail.wxss` - 详情页样式

#### 3.3.4 pages/cart/ - 购物车页
**功能说明**：购物车管理页面

**主要功能**：
- 购物车商品列表展示
- 商品选择/取消选择
- 全选/取消全选
- 商品数量调整
- 删除商品
- 清空购物车
- 结算功能

**关键文件**：
- `cart.wxml` - 包含商品列表、底部结算栏
- `cart.ts` - 包含购物车数据管理、选择逻辑、价格计算
- `cart.wxss` - 购物车样式

**数据存储**：
- 使用 `wx.getStorageSync('cart')` 本地存储购物车数据

#### 3.3.5 pages/order/ - 订单中心页
**功能说明**：订单管理页面

**主要功能**：
- 订单状态标签切换（全部/待制作/制作中/已完成/已取消）
- 订单列表展示
- 订单详情查看
- 订单操作（取消、联系商家、评价、再来一单）

**关键文件**：
- `order.wxml` - 包含状态标签、订单列表
- `order.ts` - 包含订单数据、状态切换、订单操作
- `order.wxss` - 订单列表样式

#### 3.3.6 pages/profile/ - 个人中心页
**功能说明**：用户个人信息页面

**主要功能**：
- 用户信息展示（头像、昵称、手机号）
- 统计数据展示（订单数、累计消费、积分）
- 我的订单快捷入口
- 功能菜单（地址、优惠券、积分商城、客服、反馈）

**关键文件**：
- `profile.wxml` - 包含用户信息区域、订单入口、功能菜单
- `profile.ts` - 包含用户数据、页面跳转
- `profile.wxss` - 个人中心样式

#### 3.3.7 pages/merchant/ - 商家管理页
**功能说明**：商家后台管理页面

**主要功能**：
- 数据统计展示（今日订单、今日营业额）
- 快捷操作入口（新增商品、分类管理、订单管理、数据统计）
- 新订单提醒
- 订单管理列表
- 商品管理列表
- 门店信息管理

**关键文件**：
- `merchant.wxml` - 包含统计卡片、操作入口、订单列表、商品列表
- `merchant.ts` - 包含商家数据、管理操作
- `merchant.wxss` - 商家管理样式

#### 3.3.8 pages/index/ 和 pages/logs/
**文件说明**：微信小程序模板默认页面，可保留或删除

---

### 3.4 utils/ - 工具函数目录

#### 3.4.1 utils/util.ts
**文件说明**：工具函数文件

**主要功能**：
- 通用工具函数
- 格式化函数
- 数据处理函数

**建议扩展**：
- API 请求封装
- 数据格式化（日期、价格等）
- 本地存储封装
- 错误处理

---

### 3.5 miniprogram_npm/ - npm 构建产物

#### 3.5.1 miniprogram_npm/tdesign-miniprogram/
**目录说明**：TDesign 组件库构建产物

**说明**：
- 此目录由微信开发者工具自动生成
- 包含 TDesign 所有组件的编译后文件
- 不需要手动修改

**使用方式**：
在 `app.json` 或页面 `*.json` 中注册组件：
```json
{
  "usingComponents": {
    "t-button": "tdesign-miniprogram/button/button"
  }
}
```

---

### 3.6 typings/ - TypeScript 类型定义

#### 3.6.1 typings/
**目录说明**：TypeScript 类型定义文件

**文件列表**：
- `index.d.ts` - 全局类型定义
- `types/index.d.ts` - 类型定义入口
- `types/wx/` - 微信 API 类型定义

**说明**：
- 提供 TypeScript 类型支持
- 包含微信小程序 API 的类型定义

---

### 3.7 ref/ - 参考原型目录

#### 3.7.1 ref/
**目录说明**：存放 HTML 原型文件，作为 UI 设计参考

**文件列表**：
- `index.html` - 原型展示首页
- `home.html` - 首页原型
- `product-list.html` - 商品列表原型
- `product-detail.html` - 商品详情原型
- `cart.html` - 购物车原型
- `order.html` - 订单原型
- `profile.html` - 个人中心原型
- `merchant.html` - 商家管理原型
- `ref.md` - 需求文档

**说明**：
- 这些文件仅作为设计参考
- 实际开发以小程序页面为准

---

### 3.8 docs/ - 文档目录

#### 3.8.1 docs/
**目录说明**：项目文档目录

**文件列表**：
- `API设计文档.md` - 后端 API 接口设计文档
- `项目目录说明.md` - 本文件

---

## 4. 配置文件说明

### 4.1 package.json
**文件说明**：项目依赖配置

**主要依赖**：
```json
{
  "dependencies": {
    "tdesign-miniprogram": "^1.12.1"  // TDesign 组件库
  }
}
```

### 4.2 project.config.json
**文件说明**：微信开发者工具项目配置

**主要配置**：
- `miniprogramRoot`：小程序源码目录
- `appid`：小程序 AppID
- `setting`：编译设置（TypeScript、ES6 等）

### 4.3 tsconfig.json
**文件说明**：TypeScript 编译配置

**主要配置**：
- `compilerOptions`：编译选项
- `include`：包含的文件
- `exclude`：排除的文件

---

## 5. 页面文件结构说明

每个页面目录的标准结构：

```
pages/xxx/
├── xxx.js          # 页面逻辑（JavaScript，小程序运行使用）
├── xxx.ts          # 页面逻辑（TypeScript 源码）
├── xxx.json        # 页面配置（组件注册、导航栏等）
├── xxx.wxml        # 页面结构（类似 HTML）
└── xxx.wxss        # 页面样式（类似 CSS）
```

### 5.1 *.js / *.ts
**说明**：页面逻辑文件
- `.ts` 是 TypeScript 源码
- `.js` 是编译后的 JavaScript（小程序实际使用）
- 包含 `Page()` 函数，定义页面数据和方法

### 5.2 *.json
**说明**：页面配置文件
- `navigationBarTitleText`：导航栏标题
- `usingComponents`：页面使用的组件

### 5.3 *.wxml
**说明**：页面结构文件
- 类似 HTML，但使用小程序标签
- 支持数据绑定 `{{}}`
- 支持条件渲染 `wx:if`
- 支持列表渲染 `wx:for`

### 5.4 *.wxss
**说明**：页面样式文件
- 类似 CSS，但有一些限制
- 支持 rpx 单位（响应式像素）
- 支持样式导入 `@import`

---

## 6. 数据存储说明

### 6.1 本地存储
**使用方式**：
```javascript
// 存储
wx.setStorageSync('key', value)

// 读取
const value = wx.getStorageSync('key')

// 删除
wx.removeStorageSync('key')
```

**当前使用场景**：
- 购物车数据：`wx.getStorageSync('cart')`
- 用户信息：可扩展存储用户 token、用户信息等

### 6.2 全局数据
**使用方式**：
```javascript
// app.ts 中定义
globalData: {
  userInfo: null
}

// 页面中获取
const app = getApp()
app.globalData.userInfo
```

---

## 7. 组件使用说明

### 7.1 TDesign 组件
**注册方式**：
在 `app.json` 或页面 `*.json` 中注册：
```json
{
  "usingComponents": {
    "t-button": "tdesign-miniprogram/button/button"
  }
}
```

**使用方式**：
```xml
<t-button theme="primary" bind:click="handleClick">
  按钮文字
</t-button>
```

**常用组件**：
- `t-icon` - 图标
- `t-button` - 按钮
- `t-tag` - 标签
- `t-cell` - 单元格
- `t-grid` - 网格
- `t-stepper` - 步进器
- `t-checkbox` - 复选框
- `t-radio` - 单选框
- `t-tabs` - 标签页
- `t-swiper` - 轮播图
- `t-empty` - 空状态
- `t-badge` - 徽标

---

## 8. 开发规范

### 8.1 命名规范
- **页面目录**：小写，使用连字符，如 `product-detail`
- **文件命名**：与目录名一致
- **变量命名**：驼峰命名，如 `cartList`
- **样式类名**：小写，使用连字符，如 `product-card`

### 8.2 代码组织
- **页面逻辑**：按功能模块组织方法
- **样式**：使用 BEM 命名规范（可选）
- **注释**：关键逻辑添加注释

### 8.3 数据管理
- **页面数据**：使用 `data` 定义
- **全局数据**：使用 `globalData`
- **持久化数据**：使用本地存储

---

## 9. 扩展建议

### 9.1 API 请求封装
在 `utils/` 目录下创建 `api.js`：
```javascript
// utils/api.js
const baseURL = 'https://api.example.com/v1'

function request(url, method, data) {
  return new Promise((resolve, reject) => {
    wx.request({
      url: baseURL + url,
      method: method,
      data: data,
      header: {
        'Authorization': 'Bearer ' + wx.getStorageSync('token')
      },
      success: resolve,
      fail: reject
    })
  })
}

module.exports = {
  get: (url, data) => request(url, 'GET', data),
  post: (url, data) => request(url, 'POST', data)
}
```

### 9.2 工具函数扩展
- 日期格式化
- 价格格式化
- 图片处理
- 数据验证

### 9.3 状态管理
对于复杂应用，可考虑使用状态管理库（如 MobX）

---

## 10. 常见问题

### 10.1 图标不显示
- 检查图标路径是否正确
- 检查图标文件是否存在
- 检查图标尺寸是否符合要求（81px × 81px）

### 10.2 组件不显示
- 检查组件是否在 `*.json` 中注册
- 检查组件路径是否正确
- 检查 TDesign 是否已正确安装

### 10.3 样式不生效
- 检查样式文件路径
- 检查样式选择器是否正确
- 检查是否有样式冲突

---

## 11. 部署说明

### 11.1 开发环境
1. 安装依赖：`npm install`
2. 使用微信开发者工具打开项目
3. 配置 AppID
4. 编译运行

### 11.2 生产环境
1. 在微信开发者工具中点击"上传"
2. 在微信公众平台提交审核
3. 审核通过后发布

---

## 12. 维护说明

### 12.1 版本更新
- 更新依赖：`npm update`
- 更新 TDesign：`npm install tdesign-miniprogram@latest`

### 12.2 代码维护
- 定期清理无用代码
- 优化性能
- 修复 bug
- 添加新功能

---

## 13. 联系方式

如有问题，请参考：
- 微信小程序官方文档：https://developers.weixin.qq.com/miniprogram/dev/framework/
- TDesign 文档：https://tdesign.tencent.com/miniprogram/overview
